= render partial: 'nav', locals: { tab: :family }

- if @person.father_id || @person.mother_id
  .row
    .col-12.col-lg-8.offset-lg-2
      %h4.mt-2= t('people.parents')
      = render partial: 'shared/search_doc', locals: { doc: @person.mother, hide_type: true } if @person.mother_id
      = render partial: 'shared/search_doc', locals: { doc: @person.father, hide_type: true } if @person.father_id

- if @siblings&.count > 0
  .row
    .col-12.col-lg-8.offset-lg-2
      %h4.mt-2= t('people.siblings')
      - last_mother_id, last_father_id = -1
      - @siblings.each do |sibling|
        - if sibling.mother_id != last_mother_id || sibling.father_id != last_father_id
          - p1 = (link_to sibling.mother&.full_name, sibling.mother || t('people.unknown'))
          - p2 = (link_to sibling.father&.full_name, sibling.father || t('people.unknown'))
          %h5
            =t('people.with_and', p1: p1, p2: p2).html_safe
        = render partial: 'shared/search_doc', locals: { doc: sibling, hide_type: true }
        - last_mother_id = sibling.mother_id
        - last_father_id = sibling.father_id

- if @current_spouse
  .row
    .col-12.col-lg-8.offset-lg-2
      - spouse = link_to @current_spouse.full_name, @current_spouse
      %h4= t('people.married_to', spouse: spouse).html_safe

- if @children&.count > 0
  .row
    .col-12.col-lg-8.offset-lg-2
      %h4= t('people.children')
      - last_spouse_id = -1
      - @children.each do |child|
        - if (child.mother_id == @person.id && child.father_id != last_spouse_id)
          %h5
            =t('people.with')
            =link_to child.father&.full_name, (child.father || t('people.unknown'))
          - last_spouse_id = child.father_id
        - elsif (child.father_id == @person.id && child.mother_id != last_spouse_id)
          %h5
            =t('people.with')
            =link_to child.mother&.full_name, (child.mother || t('people.unknown'))
          - last_spouse_id = child.mother_id
        = render partial: 'shared/search_doc', locals: { doc: child, hide_type: true }
